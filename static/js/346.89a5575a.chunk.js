"use strict";(self.webpackChunkreact_task_1=self.webpackChunkreact_task_1||[]).push([[346],{9346:function(e,r,t){t.r(r),t.d(r,{default:function(){return q}});var n=t(2982),i=t(2791),s=t(1328),a=t(885),c=t(4493),u="rating_rating__Atn92",d=t(184),o=function(e){var r=e.rating,t=Array(r).fill("\u2605");return(0,d.jsx)("div",{className:u,children:t.map((function(e,r){return(0,d.jsx)("span",{children:e},r)}))})},l=t(7785),_=t(5887),v=t(5885),p="review_review__AqfN4",f="review_head__--Z39",x="review_body__3OTuD",h="review_author__-KsBa",j="review_avatar__F6juL",m="review_delete__jllcp",g=function(e){var r=e.review,t=(0,i.useState)(),n=(0,a.Z)(t,2),s=n[0],u=n[1],g=(0,l.CG)(v.dy),w=(0,l.TL)();(0,i.useEffect)((function(){c.f.getUserById(r.author).then((function(e){return u(e.data)}))}),[]);var N=(0,i.useMemo)((function(){return(null===g||void 0===g?void 0:g._id)===r.author}),[g]);return(0,d.jsxs)("div",{className:p,children:[(0,d.jsxs)("div",{className:f,children:[(0,d.jsx)(o,{rating:r.rating}),(0,d.jsx)("span",{children:new Date(r.created_at).toLocaleString("ru")}),N&&(0,d.jsx)("span",{className:m,onClick:function(){w((0,_.i0)({productId:r.product,reviewId:r._id}))},children:"X"})]}),(0,d.jsxs)("div",{className:x,children:[(0,d.jsx)("div",{className:j,children:(0,d.jsx)("img",{src:null===s||void 0===s?void 0:s.avatar,alt:"avatar"})}),(0,d.jsx)("p",{children:r.text})]}),(0,d.jsxs)("div",{className:h,children:[(0,d.jsx)("span",{children:null===s||void 0===s?void 0:s.name}),(0,d.jsx)("span",{children:null===s||void 0===s?void 0:s.about})]})]})},w=t(7063),N="reviewform_reviewform__GOJjp",C="reviewform_textarea__vZy7M",k="reviewform_rating__+4ptj",I=function(e){var r=e.productId,t=(0,i.useState)(""),n=(0,a.Z)(t,2),s=n[0],c=n[1],u=(0,i.useState)("5"),o=(0,a.Z)(u,2),v=o[0],p=o[1],f=(0,l.TL)();return(0,d.jsxs)("div",{className:N,children:[(0,d.jsx)("h2",{children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"}),(0,d.jsx)("input",{className:k,type:"number",value:v,max:5,min:1,onChange:function(e){return p(e.currentTarget.value)}}),(0,d.jsx)("textarea",{rows:5,value:s,className:C,onChange:function(e){return c(e.currentTarget.value)}}),(0,d.jsx)(w.z,{onClick:function(){f((0,_.N_)({productId:r,text:s,rating:v})),c(""),p("")},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},T=t(1125),Z=t(2893),b=t(7668),y=t(9292),B=t(7645),z=t(5678),A="productdetailpage_productDetailPage__w+HiC",D="productdetailpage_name__tcHDB",G="productdetailpage_product__vQCj+",L="productdetailpage_priceInfo__qUf6U",S="productdetailpage_info__xzcIm",J="productdetailpage_picture__hJ9T8",O="productdetailpage_button__1kh78",U="productdetailpage_reviews__t-Y1O",q=function(){var e=(0,l.CG)(z.m_),r=(0,l.CG)(z.zB),t=(0,l.TL)(),i=(0,l.CG)((function(r){return(0,B.SB)(r,e._id)}));return(0,d.jsxs)("div",{className:A,children:[(0,d.jsxs)("h1",{className:D,children:[null===e||void 0===e?void 0:e.name," ",e.wight]}),e.tags.includes("new")?(0,d.jsx)(Z.C,{text:"\u043d\u043e\u0432\u0438\u043d\u043a\u0430",variant:"new"}):e.tags.includes("sale")?(0,d.jsx)(Z.C,{text:e.discount,variant:"sale"}):null,(0,d.jsxs)("div",{className:G,children:[(0,d.jsxs)("div",{className:J,children:[(0,d.jsx)("img",{src:null===e||void 0===e?void 0:e.pictures,alt:"product"}),(0,d.jsxs)("div",{className:L,children:[(0,d.jsxs)("span",{children:[e.stock," \u0448\u0442"]}),(0,d.jsx)(s.t,{price:e.price,discount:e.discount})]})]}),(0,d.jsx)("div",{className:S,children:i?(0,d.jsx)(T.d,{productId:e._id,amount:i,price:e.price,discount:e.discount,maxAmount:e.stock}):(0,d.jsx)(w.z,{onClick:function(){t((0,y.Jr)({id:e._id,price:e.price,discount:e.discount}))},className:O,children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]}),(0,d.jsx)(I,{productId:e._id}),e.reviews.length?(0,d.jsxs)("div",{className:U,children:[(0,d.jsx)("h2",{children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),"loading"===r?(0,d.jsx)(b.Z,{}):(0,n.Z)(e.reviews).reverse().map((function(e){return(0,d.jsx)(g,{review:e},e._id)}))]}):null]})}},5678:function(e,r,t){t.d(r,{$p:function(){return i},AD:function(){return s},l:function(){return a},m_:function(){return u},nR:function(){return n},zB:function(){return c}});var n=function(e){return e.products.products},i=function(e){return e.products.searchTerm},s=function(e){return e.products.filter},a=function(e){return e.products.status.products},c=function(e){return e.products.status.reviews},u=function(e){return e.products.selectedProduct}}}]);
//# sourceMappingURL=346.89a5575a.chunk.js.map