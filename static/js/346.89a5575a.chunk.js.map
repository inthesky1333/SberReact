{"version":3,"file":"static/js/346.89a5575a.chunk.js","mappings":"mNACA,EAAyB,uB,SCIZA,EAA2B,SAAH,GAAoB,IAAdC,EAAM,EAANA,OACnCC,EAAYC,MAAMF,GAAQG,KAAK,UACrC,OACE,gBAAKC,UAAWC,EAAc,SAC3BJ,EAAUK,KAAI,SAACC,EAAMC,GACpB,OAAO,0BAAmBD,GAARC,EACpB,KAGN,E,8BCbA,EAAyB,uBAAzB,EAAuD,qBAAvD,EAAmF,qBAAnF,EAAiH,uBAAjH,EAAiJ,uBAAjJ,EAAiL,uBCWpKC,EAA2B,SAAH,GAAoB,IAAdC,EAAM,EAANA,OACzC,GAA4BC,EAAAA,EAAAA,YAAmB,eAAxCC,EAAM,KAAEC,EAAS,KAClBC,GAAOC,EAAAA,EAAAA,IAAeC,EAAAA,IACtBC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACRC,EAAAA,EAAAA,YAAyBV,EAAOE,QAAQS,MAAK,SAACC,GAAG,OAAKT,EAAUS,EAAIC,KAAK,GAC3E,GAAG,IAEH,IAAMC,GAAWC,EAAAA,EAAAA,UAAQ,WACvB,OAAW,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAMY,OAAQhB,EAAOE,MAC9B,GAAG,CAACE,IAMJ,OACE,iBAAKV,UAAWC,EAAc,WAC5B,iBAAKD,UAAWC,EAAY,WAC1B,SAACN,EAAM,CAACC,OAAQU,EAAOV,UACvB,0BAAO,IAAI2B,KAAKjB,EAAOkB,YAAYC,eAAe,QACjDL,IACC,iBAAMpB,UAAWC,EAAeyB,QAVb,WACzBb,GAASc,EAAAA,EAAAA,IAAa,CAAEC,UAAWtB,EAAOuB,QAASC,SAAUxB,EAAOgB,MACtE,EAQoE,mBAKhE,iBAAKtB,UAAWC,EAAY,WAC1B,gBAAKD,UAAWC,EAAc,UAC5B,gBAAK8B,IAAW,OAANvB,QAAM,IAANA,OAAM,EAANA,EAAQwB,OAAQC,IAAI,cAEhC,uBAAI3B,EAAO4B,WAEb,iBAAKlC,UAAWC,EAAc,WAC5B,0BAAa,OAANO,QAAM,IAANA,OAAM,EAANA,EAAQ2B,QACf,0BAAa,OAAN3B,QAAM,IAANA,OAAM,EAANA,EAAQ4B,aAIvB,E,UCnDA,EAA6B,+BAA7B,EAAuE,6BAAvE,EAA6G,2BCQhGC,EAAmC,SAAH,GAAuB,IAAjBT,EAAS,EAATA,UACjD,GAAwBrB,EAAAA,EAAAA,UAAS,IAAG,eAA7B2B,EAAI,KAAEI,EAAO,KACpB,GAA4B/B,EAAAA,EAAAA,UAAS,KAAI,eAAlCX,EAAM,KAAE2C,EAAS,KAClB1B,GAAWC,EAAAA,EAAAA,MAQjB,OACE,iBAAKd,UAAWC,EAAkB,WAChC,6GACA,kBACED,UAAWC,EACXuC,KAAK,SACLC,MAAO7C,EACP8C,IAAK,EACLC,IAAK,EACLC,SAAU,SAACC,GAAC,OAAKN,EAAUM,EAAEC,cAAcL,MAAM,KAEnD,qBACEM,KAAM,EACNN,MAAOP,EACPlC,UAAWC,EACX2C,SAAU,SAACC,GAAC,OAAKP,EAAQO,EAAEC,cAAcL,MAAM,KAEjD,SAACO,EAAA,EAAM,CAACtB,QAvBS,WACnBb,GAASoC,EAAAA,EAAAA,IAAU,CAAErB,UAAAA,EAAWM,KAAAA,EAAMtC,OAAAA,KACtC0C,EAAQ,IACRC,EAAU,GACZ,EAmBkC,sEAGpC,E,4DCvCA,EAAoC,6CAApC,EAAwF,gCAAxF,EAAkI,mCAAlI,EAAiL,qCAAjL,EAA6N,gCAA7N,EAAuQ,mCAAvQ,EAAmT,kCAAnT,EAA+V,mCC4F/V,EAzEuD,WACrD,IAAMV,GAAUlB,EAAAA,EAAAA,IAAeuC,EAAAA,IACzBC,GAASxC,EAAAA,EAAAA,IAAeyC,EAAAA,IACxBvC,GAAWC,EAAAA,EAAAA,MAEXuC,GAAsB1C,EAAAA,EAAAA,KAAe,SAAC2C,GAAK,OAC/CC,EAAAA,EAAAA,IAAoBD,EAAOzB,EAAQP,IAAI,IAazC,OACE,iBAAKtB,UAAWC,EAAyB,WACvC,gBAAID,UAAWC,EAAY,UACjB,OAAP4B,QAAO,IAAPA,OAAO,EAAPA,EAASM,KAAI,IAAGN,EAAQ2B,SAE1B3B,EAAQ4B,KAAKC,SAAS,QACrB,SAACC,EAAA,EAAK,CAACzB,KAAM,6CAAW0B,QAAS,QAC/B/B,EAAQ4B,KAAKC,SAAS,SACxB,SAACC,EAAA,EAAK,CAACzB,KAAML,EAAQgC,SAAUD,QAAS,SACtC,MACJ,iBAAK5D,UAAWC,EAAe,WAC7B,iBAAKD,UAAWC,EAAe,WAC7B,gBAAK8B,IAAY,OAAPF,QAAO,IAAPA,OAAO,EAAPA,EAASiC,SAAU7B,IAAI,aACjC,iBAAKjC,UAAWC,EAAiB,WAC/B,4BAAO4B,EAAQkC,MAAK,oBACpB,SAACC,EAAA,EAAK,CAACC,MAAOpC,EAAQoC,MAAOJ,SAAUhC,EAAQgC,kBAGnD,gBAAK7D,UAAWC,EAAY,SACzBoD,GACC,SAACa,EAAA,EAAa,CACZtC,UAAWC,EAAQP,IACnB6C,OAAQd,EACRY,MAAOpC,EAAQoC,MACfJ,SAAUhC,EAAQgC,SAClBO,UAAWvC,EAAQkC,SAGrB,SAACf,EAAA,EAAM,CACLtB,QAAS,WAtCnBb,GACEwD,EAAAA,EAAAA,IAAU,CACRC,GAAIzC,EAAQP,IACZ2C,MAAOpC,EAAQoC,MACfJ,SAAUhC,EAAQgC,WAkCqB,EACjC7D,UAAWC,EAAc,qEAOjC,SAACoC,EAAU,CAACT,UAAWC,EAAQP,MAC9BO,EAAQ0C,QAAQC,QACf,iBAAKxE,UAAWC,EAAe,WAC7B,iEACY,YAAXkD,GACC,SAACsB,EAAA,EAAS,KAEV,OAAI5C,EAAQ0C,SACTG,UACAxE,KAAI,SAACI,GAAM,OAAK,SAACD,EAAM,CAAkBC,OAAQA,GAApBA,EAAOgB,IAAuB,OAGhE,OAGV,C,+KCzFO,IAAMqD,EAAiB,SAACrB,GAAgB,OAAKA,EAAMsB,SAASA,QAAS,EAC/DC,EAAmB,SAACvB,GAAgB,OAAKA,EAAMsB,SAASE,UAAW,EACnEC,EAAe,SAACzB,GAAgB,OAAKA,EAAMsB,SAASI,MAAO,EAC3DC,EAAuB,SAAC3B,GAAgB,OACnDA,EAAMsB,SAASzB,OAAOyB,QAAS,EACpBxB,EAAqB,SAACE,GAAgB,OACjDA,EAAMsB,SAASzB,OAAOoB,OAAQ,EACnBrB,EAAwB,SAACI,GAAgB,OACpDA,EAAMsB,SAASM,eAAgB,C","sources":["webpack://react_task_1/./src/components/UI/Rating/rating.module.css?a712","components/UI/Rating/index.tsx","webpack://react_task_1/./src/components/Review/review.module.css?3748","components/Review/index.tsx","webpack://react_task_1/./src/components/ReviewForm/reviewform.module.css?8e02","components/ReviewForm/index.tsx","webpack://react_task_1/./src/pages/ProductDetailPage/productdetailpage.module.css?2954","pages/ProductDetailPage/index.tsx","store/products/selectors.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"rating\":\"rating_rating__Atn92\"};","import React, { FC } from \"react\";\n\nimport styles from \"./rating.module.css\";\nimport { IRatingProps } from \"./ratingProps\";\n\nexport const Rating: FC<IRatingProps> = ({ rating }) => {\n  const ratingArr = Array(rating).fill(\"★\");\n  return (\n    <div className={styles.rating}>\n      {ratingArr.map((star, index) => {\n        return <span key={index}>{star}</span>;\n      })}\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"review\":\"review_review__AqfN4\",\"head\":\"review_head__--Z39\",\"body\":\"review_body__3OTuD\",\"author\":\"review_author__-KsBa\",\"avatar\":\"review_avatar__F6juL\",\"delete\":\"review_delete__jllcp\"};","import React, { FC, useEffect, useMemo, useState } from \"react\";\n\nimport { UsersService } from \"@api/userApi/usersService\";\nimport { Rating } from \"@components/UI/Rating\";\nimport { IAuthor } from \"@interfaces/author\";\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport { deleteReview } from \"@store/products/productsActions\";\nimport { selectUser } from \"@store/user/selectors\";\n\nimport styles from \"./review.module.css\";\nimport { IReviewProps } from \"./reviewProps\";\n\nexport const Review: FC<IReviewProps> = ({ review }) => {\n  const [author, setAuthor] = useState<IAuthor>();\n  const user = useAppSelector(selectUser);\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    UsersService.getUserById(review.author).then((res) => setAuthor(res.data));\n  }, []);\n\n  const isAuthor = useMemo(() => {\n    return user?._id === review.author;\n  }, [user]);\n\n  const handleDeleteReview = () => {\n    dispatch(deleteReview({ productId: review.product, reviewId: review._id }));\n  };\n\n  return (\n    <div className={styles.review}>\n      <div className={styles.head}>\n        <Rating rating={review.rating}></Rating>\n        <span>{new Date(review.created_at).toLocaleString(\"ru\")}</span>\n        {isAuthor && (\n          <span className={styles.delete} onClick={handleDeleteReview}>\n            X\n          </span>\n        )}\n      </div>\n      <div className={styles.body}>\n        <div className={styles.avatar}>\n          <img src={author?.avatar} alt=\"avatar\" />\n        </div>\n        <p>{review.text}</p>\n      </div>\n      <div className={styles.author}>\n        <span>{author?.name}</span>\n        <span>{author?.about}</span>\n      </div>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"reviewform\":\"reviewform_reviewform__GOJjp\",\"textarea\":\"reviewform_textarea__vZy7M\",\"rating\":\"reviewform_rating__+4ptj\"};","import React, { FC, useState } from \"react\";\n\nimport { Button } from \"@components/UI/Button\";\nimport { useAppDispatch } from \"@store/index\";\nimport { addReview } from \"@store/products/productsActions\";\n\nimport styles from \"./reviewform.module.css\";\nimport { IReviewFormProps } from \"./reviewformProps\";\n\nexport const RatingForm: FC<IReviewFormProps> = ({ productId }) => {\n  const [text, setText] = useState(\"\");\n  const [rating, setRating] = useState(\"5\");\n  const dispatch = useAppDispatch();\n\n  const submitReview = () => {\n    dispatch(addReview({ productId, text, rating }));\n    setText(\"\");\n    setRating(\"\");\n  };\n\n  return (\n    <div className={styles.reviewform}>\n      <h2>Оставить отзыв</h2>\n      <input\n        className={styles.rating}\n        type=\"number\"\n        value={rating}\n        max={5}\n        min={1}\n        onChange={(e) => setRating(e.currentTarget.value)}\n      />\n      <textarea\n        rows={5}\n        value={text}\n        className={styles.textarea}\n        onChange={(e) => setText(e.currentTarget.value)}\n      ></textarea>\n      <Button onClick={submitReview}>Отправить</Button>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"productDetailPage\":\"productdetailpage_productDetailPage__w+HiC\",\"name\":\"productdetailpage_name__tcHDB\",\"product\":\"productdetailpage_product__vQCj+\",\"priceInfo\":\"productdetailpage_priceInfo__qUf6U\",\"info\":\"productdetailpage_info__xzcIm\",\"picture\":\"productdetailpage_picture__hJ9T8\",\"button\":\"productdetailpage_button__1kh78\",\"reviews\":\"productdetailpage_reviews__t-Y1O\",\"reviewForm\":\"productdetailpage_reviewForm__CqOC2\",\"description\":\"productdetailpage_description__IbZa8\"};","import React, { FC } from \"react\";\n\nimport { Price } from \"@components/Price\";\nimport { Review } from \"@components/Review\";\nimport { RatingForm } from \"@components/ReviewForm\";\nimport { AmountButtons } from \"@components/UI/AmountButtons\";\nimport { Badge } from \"@components/UI/Badge\";\nimport { Button } from \"@components/UI/Button\";\nimport Preloader from \"@components/UI/Preloader\";\nimport { setToCart } from \"@store/cart/cartSlice\";\nimport { selectCartGoodCount } from \"@store/cart/selectors\";\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport {\n  selectReviewStatus,\n  selectSelectedProduct,\n} from \"@store/products/selectors\";\n\nimport styles from \"./productdetailpage.module.css\";\nimport { IProductDetailPageProps } from \"./productdetailpageProps\";\n\nconst ProductDetailPage: FC<IProductDetailPageProps> = () => {\n  const product = useAppSelector(selectSelectedProduct);\n  const status = useAppSelector(selectReviewStatus);\n  const dispatch = useAppDispatch();\n\n  const productAmountIncart = useAppSelector((state) =>\n    selectCartGoodCount(state, product._id)\n  );\n\n  const addToCartHandler = () => {\n    dispatch(\n      setToCart({\n        id: product._id,\n        price: product.price,\n        discount: product.discount,\n      })\n    );\n  };\n\n  return (\n    <div className={styles.productDetailPage}>\n      <h1 className={styles.name}>\n        {product?.name} {product.wight}\n      </h1>\n      {product.tags.includes(\"new\") ? (\n        <Badge text={\"новинка\"} variant={\"new\"} />\n      ) : product.tags.includes(\"sale\") ? (\n        <Badge text={product.discount} variant={\"sale\"} />\n      ) : null}\n      <div className={styles.product}>\n        <div className={styles.picture}>\n          <img src={product?.pictures} alt=\"product\" />\n          <div className={styles.priceInfo}>\n            <span>{product.stock} шт</span>\n            <Price price={product.price} discount={product.discount} />\n          </div>\n        </div>\n        <div className={styles.info}>\n          {productAmountIncart ? (\n            <AmountButtons\n              productId={product._id}\n              amount={productAmountIncart}\n              price={product.price}\n              discount={product.discount}\n              maxAmount={product.stock}\n            />\n          ) : (\n            <Button\n              onClick={() => addToCartHandler()}\n              className={styles.button}\n            >\n              В корзину\n            </Button>\n          )}\n        </div>\n      </div>\n      <RatingForm productId={product._id} />\n      {product.reviews.length ? (\n        <div className={styles.reviews}>\n          <h2>Отзывы</h2>\n          {status === \"loading\" ? (\n            <Preloader />\n          ) : (\n            [...product.reviews]\n              .reverse()\n              .map((review) => <Review key={review._id} review={review} />)\n          )}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default ProductDetailPage;\n","import { RootState } from \"@store/index\";\n\nexport const selectProducts = (state: RootState) => state.products.products;\nexport const selectSearchTerm = (state: RootState) => state.products.searchTerm;\nexport const selectFilter = (state: RootState) => state.products.filter;\nexport const selectProductsStatus = (state: RootState) =>\n  state.products.status.products;\nexport const selectReviewStatus = (state: RootState) =>\n  state.products.status.reviews;\nexport const selectSelectedProduct = (state: RootState) =>\n  state.products.selectedProduct;\n"],"names":["Rating","rating","ratingArr","Array","fill","className","styles","map","star","index","Review","review","useState","author","setAuthor","user","useAppSelector","selectUser","dispatch","useAppDispatch","useEffect","UsersService","then","res","data","isAuthor","useMemo","_id","Date","created_at","toLocaleString","onClick","deleteReview","productId","product","reviewId","src","avatar","alt","text","name","about","RatingForm","setText","setRating","type","value","max","min","onChange","e","currentTarget","rows","Button","addReview","selectSelectedProduct","status","selectReviewStatus","productAmountIncart","state","selectCartGoodCount","wight","tags","includes","Badge","variant","discount","pictures","stock","Price","price","AmountButtons","amount","maxAmount","setToCart","id","reviews","length","Preloader","reverse","selectProducts","products","selectSearchTerm","searchTerm","selectFilter","filter","selectProductsStatus","selectedProduct"],"sourceRoot":""}