{"version":3,"file":"static/js/368.d2773192.chunk.js","mappings":"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","sources":["webpack://react_task_1/./src/components/FilterBar/filterbar.module.css?317d","components/FilterBar/index.tsx","hooks/useFilterParams.ts","webpack://react_task_1/./src/components/UI/Like/like.module.css?8167","components/UI/Like/index.tsx","webpack://react_task_1/./src/components/Product/product.module.css?6426","components/Product/index.tsx","webpack://react_task_1/./src/components/Products/products.module.css?8616","components/Products/index.tsx","pages/ProductsPage/addProductForm/productValidationSchema.ts","webpack://react_task_1/./src/pages/ProductsPage/addProductForm/addProductForm.module.css?c7b3","pages/ProductsPage/addProductForm/index.tsx","webpack://react_task_1/./src/pages/ProductsPage/productspage.module.css?4294","pages/ProductsPage/index.tsx","store/products/selectors.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"filterbar\":\"filterbar_filterbar__2zbBV\",\"button\":\"filterbar_button__hucd6\",\"active\":\"filterbar_active__le+92\"};","import React, { FC } from \"react\";\n\nimport { useFilterParams } from \"@hooks/useFilterParams\";\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport { setFilter } from \"@store/products/productsSlice\";\nimport { FilterType } from \"@store/products/productsTypes\";\nimport { selectFilter } from \"@store/products/selectors\";\nimport cn from \"classnames\";\n\nimport styles from \"./filterbar.module.css\";\nimport { IFilterBarProps } from \"./filterbarProps\";\n\nconst filterButtons: { name: string; value: FilterType }[] = [\n  { name: \"Все\", value: \"all\" },\n  { name: \"Популярные\", value: \"popular\" },\n  { name: \"Новинки\", value: \"new\" },\n  { name: \"Сначала дешевые\", value: \"lowPrice\" },\n  { name: \"Сначала дорогие\", value: \"highPrice\" },\n  { name: \"По рейтингу\", value: \"topRated\" },\n  { name: \"По скидке\", value: \"discount\" },\n  { name: \"Избранные\", value: \"favourite\" },\n];\n\nexport const FilterBar: FC<IFilterBarProps> = () => {\n  const filter = useAppSelector(selectFilter);\n  const dispatch = useAppDispatch();\n\n  useFilterParams();\n  const filterHandler = (value: FilterType) => {\n    dispatch(setFilter(value));\n  };\n\n  return (\n    <div className={styles.filterbar}>\n      {filterButtons.map((button) => (\n        <span\n          key={button.value}\n          onClick={() => filterHandler(button.value)}\n          className={cn(styles.button, {\n            [styles.active]: button.value === filter,\n          })}\n        >\n          {button.name}\n        </span>\n      ))}\n    </div>\n  );\n};\n","import { useEffect } from \"react\";\n\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport { setFilter } from \"@store/products/productsSlice\";\nimport { FilterType } from \"@store/products/productsTypes\";\nimport { selectFilter } from \"@store/products/selectors\";\nimport { useSearchParams } from \"react-router-dom\";\n\nexport const useFilterParams = () => {\n  const filter = useAppSelector(selectFilter);\n  const dispatch = useAppDispatch();\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  useEffect(() => {\n    const filterFromQuery = searchParams.get(\"filter\") as FilterType;\n    if (filterFromQuery) {\n      dispatch(setFilter(filterFromQuery));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (filter) {\n      setSearchParams({ filter });\n    } else {\n      setSearchParams({});\n    }\n  }, [filter]);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"like\":\"like_like__Hzax0\",\"active\":\"like_active__U9RtR\"};","import React, { FC } from \"react\";\n\nimport { ReactComponent as Icon } from \"@assets/like.svg\";\nimport cn from \"classnames\";\n\nimport styles from \"./like.module.css\";\nimport { ILikeProps } from \"./likeProps\";\n\nexport const Like: FC<ILikeProps> = ({ liked, onClick, className }) => {\n  return (\n    <>\n      <Icon\n        onClick={onClick}\n        className={cn(styles.like, className, {\n          [styles.active]: liked,\n        })}\n      />\n    </>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"product\":\"product_product__8GHq-\",\"head\":\"product_head__WxgA7\",\"info\":\"product_info__lWQ1U\",\"picture\":\"product_picture__zkXCM\",\"button\":\"product_button__IK1hU\",\"like\":\"product_like__Dt5KR\",\"stock\":\"product_stock__JSmN1\",\"deleteIcon\":\"product_deleteIcon__zDyJG\"};","import React, { FC } from \"react\";\n\nimport del from \"@assets/del.png\";\nimport { Price } from \"@components/Price\";\nimport { AmountButtons } from \"@components/UI/AmountButtons\";\nimport { Badge } from \"@components/UI/Badge\";\nimport { Button } from \"@components/UI/Button\";\nimport { Like } from \"@components/UI/Like\";\nimport { IProduct } from \"@interfaces/product\";\nimport { setToCart } from \"@store/cart/cartSlice\";\nimport { selectCartGoodCount } from \"@store/cart/selectors\";\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport {\n  addLike,\n  deleteProduct,\n  removeLike,\n} from \"@store/products/productsActions\";\nimport { setSelectedProduct } from \"@store/products/productsSlice\";\nimport { selectUser } from \"@store/user/selectors\";\nimport { Link } from \"react-router-dom\";\n\nimport styles from \"./product.module.css\";\nimport { IProductProps } from \"./productProps\";\n\nexport const Product: FC<IProductProps> = ({ product }) => {\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(selectUser);\n\n  const isOwner = user._id === product.author._id;\n\n  const handleDelete = () => {\n    const answer = window.confirm(\"Вы действительно хотите удалить товар?\");\n    return answer ? dispatch(deleteProduct(product._id)) : null;\n  };\n\n  const productAmountIncart = useAppSelector((state) =>\n    selectCartGoodCount(state, product._id)\n  );\n\n  const selectProduct = (data: IProduct) => {\n    dispatch(setSelectedProduct(data));\n  };\n\n  const addLikeHandler = (productId: string) => {\n    dispatch(addLike(productId));\n  };\n\n  const removeLikeHandler = (productId: string) => {\n    dispatch(removeLike(productId));\n  };\n\n  const addToCartHandler = () => {\n    dispatch(\n      setToCart({\n        id: product._id,\n        price: product.price,\n        discount: product.discount,\n      })\n    );\n  };\n\n  const likeHandler = () => {\n    if (product.likes.includes(user._id)) {\n      removeLikeHandler(product._id);\n    } else {\n      addLikeHandler(product._id);\n    }\n  };\n\n  return (\n    <div className={styles.product}>\n      <div className={styles.head}>\n        {product.tags.map((tag) => {\n          if (tag === \"new\") {\n            return <Badge key={tag} variant={tag} text={\"Новинка\"} />;\n          }\n          if (tag === \"sale\") {\n            return <Badge text={product.discount} variant={tag} key={tag} />;\n          }\n        })}\n        {isOwner && (\n          <img src={del} className={styles.deleteIcon} onClick={handleDelete} />\n        )}\n        <Like\n          className={styles.like}\n          onClick={likeHandler}\n          liked={product.likes.includes(user._id)}\n        />\n      </div>\n      <Link to={`/shop/product/${product._id}`}>\n        <div className={styles.picture} onClick={() => selectProduct(product)}>\n          <img src={product.pictures} alt=\"product\" />\n        </div>\n      </Link>\n      <Price price={product.price} discount={product.discount} />\n      <div className={styles.info}>\n        <div className={styles.stock}>{product.stock} шт</div>\n        <div>{product.name}</div>\n      </div>\n\n      {productAmountIncart ? (\n        <AmountButtons\n          productId={product._id}\n          amount={productAmountIncart}\n          price={product.price}\n          maxAmount={product.stock}\n          discount={product.discount}\n        />\n      ) : (\n        <Button onClick={() => addToCartHandler()} className={styles.button}>\n          В корзину\n        </Button>\n      )}\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"products\":\"products_products__ZMf2n\"};","import React, { FC } from \"react\";\n\nimport { Product } from \"@components/Product\";\n\nimport styles from \"./products.module.css\";\nimport { IProductsProps } from \"./productsProps\";\n\nexport const Products: FC<IProductsProps> = ({ products }) => {\n  if (!products.length) {\n    return (\n      <div className={styles.products}>\n        <span>Нет товаров</span>\n      </div>\n    );\n  }\n  return (\n    <div className={styles.products}>\n      {products.map((product) => (\n        <Product product={product} key={product._id} />\n      ))}\n    </div>\n  );\n};\n","import * as yup from \"yup\";\nexport const productValidationSchema = yup.object().shape({\n  name: yup.string().required(\"Поле не должно быть пустым\"),\n  price: yup\n    .number()\n    .positive(\"Цена не может быть отрицательной\")\n    .required(\"Поле не должно быть пустым\"),\n  discount: yup\n    .number()\n    .positive(\"Скидка не может быть отрицательной\")\n    .required(\"Поле не должно быть пустым\"),\n  description: yup.string().required(\"Поле не должно быть пустым\"),\n  stock: yup\n    .number()\n    .positive(\"Количество не может быть отрицательным\")\n    .required(\"Поле не должно быть пустым\"),\n  pictures: yup\n    .string()\n    .url(\"Ссылка должна быть валидной\")\n    .required(\"Поле не должно быть пустым\"),\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"textarea\":\"addProductForm_textarea__JSeSI\",\"form\":\"addProductForm_form__3C3bg\",\"fieldset\":\"addProductForm_fieldset__AkDEo\"};","import React from \"react\";\n\nimport { Button } from \"@components/UI/Button\";\nimport { FormError } from \"@components/UI/FormError\";\nimport { Input } from \"@components/UI/Input\";\nimport { yupResolver } from \"@hookform/resolvers/yup/dist/yup\";\nimport { INewProduct } from \"@interfaces/product\";\nimport { productValidationSchema } from \"@pages/ProductsPage/addProductForm/productValidationSchema\";\nimport { useAppDispatch } from \"@store/index\";\nimport { addProduct } from \"@store/products/productsActions\";\nimport { SubmitHandler, useForm } from \"react-hook-form\";\n\nimport styles from \"./addProductForm.module.css\";\n\nexport const AddProductForm = () => {\n  const {\n    handleSubmit,\n    register,\n    formState: { errors, isValid },\n  } = useForm<INewProduct>({\n    resolver: yupResolver(productValidationSchema),\n    mode: \"onChange\",\n  });\n\n  const dispatch = useAppDispatch();\n\n  const onSubmit: SubmitHandler<INewProduct> = ({\n    name,\n    available = true,\n    price,\n    discount,\n    description,\n    wight,\n    pictures,\n    stock,\n  }) => {\n    dispatch(\n      addProduct({\n        name,\n        available,\n        price,\n        discount,\n        description,\n        wight,\n        pictures,\n        stock,\n      })\n    );\n  };\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit(onSubmit)}>\n      <Input {...register(\"name\")} name={\"name\"} placeholder={\"Имя\"} />\n      <FormError error={errors.name} />\n      <Input\n        {...register(\"price\")}\n        name={\"price\"}\n        placeholder={\"Цена\"}\n        type={\"number\"}\n      />\n      <FormError error={errors.price} />\n      <Input\n        {...register(\"discount\")}\n        name={\"discount\"}\n        placeholder={\"Скидка\"}\n        type={\"number\"}\n      />\n      <FormError error={errors.discount} />\n\n      <Input {...register(\"wight\")} name={\"wight\"} placeholder={\"Вес\"} />\n      <Input\n        {...register(\"stock\")}\n        name={\"stock\"}\n        placeholder={\"Количество\"}\n        type={\"number\"}\n      />\n      <FormError error={errors.stock} />\n\n      <textarea\n        rows={5}\n        className={styles.textarea}\n        {...register(\"description\")}\n        name={\"description\"}\n        placeholder={\"Описание\"}\n      />\n      <FormError error={errors.description} />\n      <Input\n        {...register(\"pictures\")}\n        name={\"pictures\"}\n        placeholder={\"Картинка\"}\n      />\n      <FormError error={errors.pictures} />\n      <Button type={\"submit\"} disabled={!isValid}>\n        Сохранить\n      </Button>\n    </form>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"addButton\":\"productspage_addButton__QPHHx\",\"topBar\":\"productspage_topBar__957jE\"};","import React, { FC, useEffect, useMemo, useState } from \"react\";\n\nimport { FilterBar } from \"@components/FilterBar\";\nimport { Products } from \"@components/Products\";\nimport { Button } from \"@components/UI/Button\";\nimport { Modal } from \"@components/UI/Modal\";\nimport Preloader from \"@components/UI/Preloader\";\nimport { AddProductForm } from \"@pages/ProductsPage/addProductForm\";\nimport { useAppDispatch, useAppSelector } from \"@store/index\";\nimport { getProducts } from \"@store/products/productsActions\";\nimport {\n  selectFilter,\n  selectProducts,\n  selectProductsStatus,\n  selectSearchTerm,\n} from \"@store/products/selectors\";\nimport { selectUser } from \"@store/user/selectors\";\n\nimport styles from \"./productspage.module.css\";\nimport { IProductsPageProps } from \"./productspageProps\";\n\nconst ProductsPage: FC<IProductsPageProps> = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const products = useAppSelector(selectProducts);\n  const status = useAppSelector(selectProductsStatus);\n  const term = useAppSelector(selectSearchTerm);\n  const filter = useAppSelector(selectFilter);\n  const user = useAppSelector(selectUser);\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(getProducts());\n  }, []);\n\n  const filteredProducts = useMemo(() => {\n    return {\n      all: [...products],\n      popular: [...products].sort(\n        (a, b) => a.reviews.length - b.reviews.length\n      ),\n      new: [...products].filter((product) => product.tags.includes(\"new\")),\n      lowPrice: [...products].sort((a, b) => a.price - b.price),\n      highPrice: [...products].sort((a, b) => b.price - a.price),\n      topRated: [...products].sort(\n        (a, b) =>\n          a.reviews.reduce((acc, cur) => {\n            acc += cur.rating;\n            return acc;\n          }, 0) /\n            a.reviews.length -\n          b.reviews.reduce((acc, cur) => {\n            acc += cur.rating;\n            return acc;\n          }, 0) /\n            b.reviews.length\n      ),\n      discount: [...products].sort((a, b) => b.discount - a.discount),\n      favourite: [...products].filter((product) =>\n        product.likes.includes(user._id)\n      ),\n    };\n  }, [products]);\n\n  const searchedProducts = useMemo(() => {\n    return filteredProducts[filter].filter((product) =>\n      product.name.toLowerCase().includes(term)\n    );\n  }, [products, term, filter]);\n\n  return (\n    <>\n      {term ? (\n        <h2>{`По запросу ${term} найдено ${searchedProducts.length} товаров`}</h2>\n      ) : null}\n      <div className={styles.topBar}>\n        <FilterBar />\n        <Button className={styles.addButton} onClick={() => setIsOpen(true)}>\n          +\n        </Button>\n      </div>\n      {status === \"loading\" ? (\n        <Preloader />\n      ) : (\n        <Products products={searchedProducts} />\n      )}\n      <Modal\n        isOpen={isOpen}\n        handleClose={() => setIsOpen(false)}\n        status={status}\n      >\n        <AddProductForm />\n      </Modal>\n    </>\n  );\n};\n\nexport default ProductsPage;\n","import { RootState } from \"@store/index\";\n\nexport const selectProducts = (state: RootState) => state.products.products;\nexport const selectSearchTerm = (state: RootState) => state.products.searchTerm;\nexport const selectFilter = (state: RootState) => state.products.filter;\nexport const selectProductsStatus = (state: RootState) =>\n  state.products.status.products;\nexport const selectReviewStatus = (state: RootState) =>\n  state.products.status.reviews;\nexport const selectSelectedProduct = (state: RootState) =>\n  state.products.selectedProduct;\n"],"names":["filterButtons","name","value","FilterBar","filter","useAppSelector","selectFilter","dispatch","useAppDispatch","useSearchParams","searchParams","setSearchParams","useEffect","filterFromQuery","get","setFilter","useFilterParams","className","styles","map","button","onClick","cn","Like","liked","Product","product","user","selectUser","isOwner","_id","author","productAmountIncart","state","selectCartGoodCount","tags","tag","Badge","variant","text","discount","src","del","window","confirm","deleteProduct","productId","likes","includes","removeLike","addLike","addLikeHandler","to","data","setSelectedProduct","pictures","alt","Price","price","stock","AmountButtons","amount","maxAmount","Button","setToCart","id","Products","products","length","productValidationSchema","yup","shape","required","positive","description","url","AddProductForm","useForm","resolver","yupResolver","mode","handleSubmit","register","formState","errors","isValid","onSubmit","available","wight","addProduct","Input","I","placeholder","FormError","error","type","rows","disabled","useState","isOpen","setIsOpen","selectProducts","status","selectProductsStatus","term","selectSearchTerm","getProducts","filteredProducts","useMemo","all","popular","sort","a","b","reviews","new","lowPrice","highPrice","topRated","reduce","acc","cur","rating","favourite","searchedProducts","toLowerCase","Preloader","Modal","handleClose","searchTerm","selectReviewStatus","selectSelectedProduct","selectedProduct"],"sourceRoot":""}