"use strict";(self.webpackChunkreact_task_1=self.webpackChunkreact_task_1||[]).push([[368],{5242:function(e,r,n){n.r(r),n.d(r,{default:function(){return te}});var t=n(2982),i=n(885),c=n(2791),s=n(4942),u=n(7785),o=n(2955),a=n(5678),d=n(1087),l=n(1694),p=n.n(l),f="filterbar_filterbar__2zbBV",_="filterbar_button__hucd6",m="filterbar_active__le+92",v=n(184),x=[{name:"\u0412\u0441\u0435",value:"all"},{name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",value:"popular"},{name:"\u041d\u043e\u0432\u0438\u043d\u043a\u0438",value:"new"},{name:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u0435\u0448\u0435\u0432\u044b\u0435",value:"lowPrice"},{name:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u043e\u0440\u043e\u0433\u0438\u0435",value:"highPrice"},{name:"\u041f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443",value:"topRated"},{name:"\u041f\u043e \u0441\u043a\u0438\u0434\u043a\u0435",value:"discount"},{name:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435",value:"favourite"}],h=function(){var e=(0,u.CG)(a.AD),r=(0,u.TL)();!function(){var e=(0,u.CG)(a.AD),r=(0,u.TL)(),n=(0,d.lr)(),t=(0,i.Z)(n,2),s=t[0],l=t[1];(0,c.useEffect)((function(){var e=s.get("filter");e&&r((0,o.Tv)(e))}),[]),(0,c.useEffect)((function(){l(e?{filter:e}:{})}),[e])}();return(0,v.jsx)("div",{className:f,children:x.map((function(n){return(0,v.jsx)("span",{onClick:function(){return e=n.value,void r((0,o.Tv)(e));var e},className:p()(_,(0,s.Z)({},m,n.value===e)),children:n.name},n.value)}))})},j=n.p+"static/media/del.c4f0af28c10a19fbeee1.png",k=n(1328),Z=n(1125),g=n(2893),C=n(7063),w=n(7605),b="like_like__Hzax0",N="like_active__U9RtR",I=function(e){var r=e.liked,n=e.onClick,t=e.className;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(w.r,{onClick:n,className:p()(b,t,(0,s.Z)({},N,r))})})},G=n(9292),R=n(7645),z=n(5887),X=n(5885),y="product_product__8GHq-",P="product_head__WxgA7",S="product_info__lWQ1U",T="product_picture__zkXCM",q="product_button__IK1hU",A="product_like__Dt5KR",D="product_stock__JSmN1",E="product_deleteIcon__zDyJG",L=function(e){var r=e.product,n=(0,u.TL)(),t=(0,u.CG)(X.dy),i=t._id===r.author._id,c=(0,u.CG)((function(e){return(0,R.SB)(e,r._id)}));return(0,v.jsxs)("div",{className:y,children:[(0,v.jsxs)("div",{className:P,children:[r.tags.map((function(e){return"new"===e?(0,v.jsx)(g.C,{variant:e,text:"\u041d\u043e\u0432\u0438\u043d\u043a\u0430"},e):"sale"===e?(0,v.jsx)(g.C,{text:r.discount,variant:e},e):void 0})),i&&(0,v.jsx)("img",{src:j,className:E,onClick:function(){return window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440?")?n((0,z.Ir)(r._id)):null}}),(0,v.jsx)(I,{className:A,onClick:function(){var e;r.likes.includes(t._id)?(e=r._id,n((0,z.fz)(e))):function(e){n((0,z.dE)(e))}(r._id)},liked:r.likes.includes(t._id)})]}),(0,v.jsx)(d.rU,{to:"/shop/product/".concat(r._id),children:(0,v.jsx)("div",{className:T,onClick:function(){return e=r,void n((0,o.CE)(e));var e},children:(0,v.jsx)("img",{src:r.pictures,alt:"product"})})}),(0,v.jsx)(k.t,{price:r.price,discount:r.discount}),(0,v.jsxs)("div",{className:S,children:[(0,v.jsxs)("div",{className:D,children:[r.stock," \u0448\u0442"]}),(0,v.jsx)("div",{children:r.name})]}),c?(0,v.jsx)(Z.d,{productId:r._id,amount:c,price:r.price,maxAmount:r.stock,discount:r.discount}):(0,v.jsx)(C.z,{onClick:function(){n((0,G.Jr)({id:r._id,price:r.price,discount:r.discount}))},className:q,children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})},B="products_products__ZMf2n",F=function(e){var r=e.products;return r.length?(0,v.jsx)("div",{className:B,children:r.map((function(e){return(0,v.jsx)(L,{product:e},e._id)}))}):(0,v.jsx)("div",{className:B,children:(0,v.jsx)("span",{children:"\u041d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})})},H=n(6795),J=n(7668),M=n(1413),U=n(3817),K=n(3085),Q=n(4695),V=n(2797),W=V.Ry().shape({name:V.Z_().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),price:V.Rx().positive("\u0426\u0435\u043d\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),discount:V.Rx().positive("\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),description:V.Z_().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),stock:V.Rx().positive("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),pictures:V.Z_().url("\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432\u0430\u043b\u0438\u0434\u043d\u043e\u0439").required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")}),$=n(1134),O="addProductForm_textarea__JSeSI",Y="addProductForm_form__3C3bg",ee=function(){var e=(0,$.cI)({resolver:(0,Q.X)(W),mode:"onChange"}),r=e.handleSubmit,n=e.register,t=e.formState,i=t.errors,c=t.isValid,s=(0,u.TL)();return(0,v.jsxs)("form",{className:Y,onSubmit:r((function(e){var r=e.name,n=e.available,t=void 0===n||n,i=e.price,c=e.discount,u=e.description,o=e.wight,a=e.pictures,d=e.stock;s((0,z.gK)({name:r,available:t,price:i,discount:c,description:u,wight:o,pictures:a,stock:d}))})),children:[(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("name")),{},{name:"name",placeholder:"\u0418\u043c\u044f"})),(0,v.jsx)(U.X,{error:i.name}),(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("price")),{},{name:"price",placeholder:"\u0426\u0435\u043d\u0430",type:"number"})),(0,v.jsx)(U.X,{error:i.price}),(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("discount")),{},{name:"discount",placeholder:"\u0421\u043a\u0438\u0434\u043a\u0430",type:"number"})),(0,v.jsx)(U.X,{error:i.discount}),(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("wight")),{},{name:"wight",placeholder:"\u0412\u0435\u0441"})),(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("stock")),{},{name:"stock",placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number"})),(0,v.jsx)(U.X,{error:i.stock}),(0,v.jsx)("textarea",(0,M.Z)((0,M.Z)({rows:5,className:O},n("description")),{},{name:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})),(0,v.jsx)(U.X,{error:i.description}),(0,v.jsx)(K.I,(0,M.Z)((0,M.Z)({},n("pictures")),{},{name:"pictures",placeholder:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})),(0,v.jsx)(U.X,{error:i.pictures}),(0,v.jsx)(C.z,{type:"submit",disabled:!c,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},re="productspage_addButton__QPHHx",ne="productspage_topBar__957jE",te=function(){var e=(0,c.useState)(!1),r=(0,i.Z)(e,2),n=r[0],s=r[1],o=(0,u.CG)(a.nR),d=(0,u.CG)(a.l),l=(0,u.CG)(a.$p),p=(0,u.CG)(a.AD),f=(0,u.CG)(X.dy),_=(0,u.TL)();(0,c.useEffect)((function(){_((0,z.Xp)())}),[]);var m=(0,c.useMemo)((function(){return{all:(0,t.Z)(o),popular:(0,t.Z)(o).sort((function(e,r){return e.reviews.length-r.reviews.length})),new:(0,t.Z)(o).filter((function(e){return e.tags.includes("new")})),lowPrice:(0,t.Z)(o).sort((function(e,r){return e.price-r.price})),highPrice:(0,t.Z)(o).sort((function(e,r){return r.price-e.price})),topRated:(0,t.Z)(o).sort((function(e,r){return e.reviews.reduce((function(e,r){return e+=r.rating}),0)/e.reviews.length-r.reviews.reduce((function(e,r){return e+=r.rating}),0)/r.reviews.length})),discount:(0,t.Z)(o).sort((function(e,r){return r.discount-e.discount})),favourite:(0,t.Z)(o).filter((function(e){return e.likes.includes(f._id)}))}}),[o]),x=(0,c.useMemo)((function(){return m[p].filter((function(e){return e.name.toLowerCase().includes(l)}))}),[o,l,p]);return(0,v.jsxs)(v.Fragment,{children:[l?(0,v.jsx)("h2",{children:"\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(l," \u043d\u0430\u0439\u0434\u0435\u043d\u043e ").concat(x.length," \u0442\u043e\u0432\u0430\u0440\u043e\u0432")}):null,(0,v.jsxs)("div",{className:ne,children:[(0,v.jsx)(h,{}),(0,v.jsx)(C.z,{className:re,onClick:function(){return s(!0)},children:"+"})]}),"loading"===d?(0,v.jsx)(J.Z,{}):(0,v.jsx)(F,{products:x}),(0,v.jsx)(H.u,{isOpen:n,handleClose:function(){return s(!1)},status:d,children:(0,v.jsx)(ee,{})})]})}},5678:function(e,r,n){n.d(r,{$p:function(){return i},AD:function(){return c},l:function(){return s},m_:function(){return o},nR:function(){return t},zB:function(){return u}});var t=function(e){return e.products.products},i=function(e){return e.products.searchTerm},c=function(e){return e.products.filter},s=function(e){return e.products.status.products},u=function(e){return e.products.status.reviews},o=function(e){return e.products.selectedProduct}}}]);
//# sourceMappingURL=368.d2773192.chunk.js.map